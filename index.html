<!DOCTYPE html><html><head><title>sup</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Jakub Kozłowski" /><meta name="description" content="Functional healthchecks in Scala" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="sup" /><meta name="title" property="og:title" content="sup" /><meta name="og:site_name" content="sup" /><meta name="og:url" content="https://github.com/kubukoz/sup" /><meta name="og:type" content="website" /><meta name="og:description" content="Functional healthchecks in Scala" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="sup" /><meta name="twitter:image" content="https://sup.kubukoz.com/img/poster.png" /><meta name="twitter:description" content="Functional healthchecks in Scala" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@kubukoz" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/vs.css" /><link rel="stylesheet" href="/css/light-style.css" /><script async="async">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-55943015-9' , 'auto');
ga('send', 'pageview');
      </script></head><body class="home"><nav id="navigation" aria-labelledby="main-navigation"><div class="navbar-wrapper container"><div class="navigation-brand"><a href="/" class="brand background-mask"><div class="icon-wrapper"></div><span class="brand-title">sup</span></a></div><div class="navigation-menu"><ul><li><a href="https://github.com/kubukoz/sup" target="_blank" rel="noopener noreferrer"><i class="nav-item-icon fa fa-lg fa-github" hidden="true"></i><span class="nav-item-text">GitHub</span></a></li><li><a href="/guide"><i class="nav-item-icon fa fa-lg fa-file-text" hidden="true"></i><span class="nav-item-text">Documentation</span></a></li></ul></div></div></nav><header id="masthead"><div class="container text-center"><h1 class="masthead-description">Functional healthchecks in Scala</h1><a href="https://github.com/kubukoz/sup" target="_blank" rel="noopener noreferrer" class="masthead-button">View on GitHub</a></div></header><main id="site-main"><section class="main-content"><div class="container"><div id="content"><h1 id="sup">sup</h1>

<p><a href="https://travis-ci.com/kubukoz/sup"><img src="https://travis-ci.com/kubukoz/sup.svg?branch=master" alt="Build Status" /></a>
<a href="https://index.scala-lang.org/kubukoz/sup/sup-core"><img src="https://index.scala-lang.org/kubukoz/sup/sup-core/latest.svg" alt="Latest version" /></a>
<a href="http://search.maven.org/#search%7Cga%7C1%7Csup-core"><img src="https://img.shields.io/maven-central/v/com.kubukoz/sup-core_2.12.svg" alt="Maven Central" /></a>
<a href="http://www.apache.org/licenses/LICENSE-2.0.txt"><img src="http://img.shields.io/:license-Apache%202-green.svg" alt="License" /></a></p>

<p><a href="https://github.com/typelevel/cats"><img src="https://img.shields.io/badge/powered%20by-cats-blue.svg" alt="Powered by cats" /></a>
<img src="https://img.shields.io/badge/gluten-free-orange.svg" alt="Gluten free" /></p>

<p>‘sup (/sʌp/) provides composable, purely functional healthchecks.</p>

<h2 id="installation">Installation</h2>

<p>For sbt:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.kubukoz"</span> <span class="o">%%</span> <span class="s">"sup-core"</span> <span class="o">%</span> <span class="s">"0.8.0"</span>
</code></pre></div></div>

<p>For ammonite:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import $ivy.`com.kubukoz::sup-core:0.8.0`
</code></pre></div></div>

<p>Imports:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">sup._</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>Check out <a href="guide/">the usage guide</a>.</p>

<h2 id="compatibility">Compatibility</h2>

<p>sup is cross-published for Scala 2.12 and 2.13.</p>

<p>The core module has a dependency on cats-core 2.x and cats-effect 2.x.</p>

<h2 id="why">Why?</h2>

<p>If your application has any external dependencies, its ability to work properly relies on the availability of these dependencies.
Most applications communicate with at least one database, and sometimes a service provided by someone else (e.g. Amazon S3, PayPal and so on).
It’s also common to talk to a message broker (Kafka, RabbitMQ, ActiveMQ, etc.). In the microservice world, your applications will probably talk to each other, as welll.</p>

<p>The last thing you want to happen is some other system’s problem causing downtime in yours.
We’re living in a world where <a href="https://en.wikipedia.org/wiki/Network_partition">the network isn’t reliable</a>,
and even healthy services can fail to respond to your requests due to network issues at any time.</p>

<p>By relying on systems living beyond your application’s control, you reduce your <a href="https://en.wikipedia.org/wiki/Service-level_agreement">SLA</a>
to the lowest SLA of your dependencies. Even if your application has nine nines of availability (99.9999999%) on its own,
but it requires S3 (with uptime of 99.9%) to be up, your application is only available for 99.9% of the time.</p>

<p>Because of the risk associated with external services, modern applications employ a range of fault tolerance and isolation mechanisms,
like circuit breakers, rate limiters and bulkheads.
To ensure that our applications handle failure properly, and that we can react to problems in the system
knowing what exactly doesn’t work, we also track its health by
<a href="https://docs.microsoft.com/en-us/azure/architecture/best-practices/monitoring">monitoring</a>, tracing and other diagnostics.</p>

<p>We also use healthchecks.</p>

<h2 id="health-checks">Health checks</h2>

<p>The health check pattern usually involves having an API endpoint that reports the health of your application,
including the health of each external dependency. It’s reasonable that the information the endpoint exposes be cached
and automatically refreshed, and protected by a circuit breaker to ensure that checking the health
doesn’t make matters worse.</p>

<h2 id="goals-of-this-project">Goals of this project</h2>

<p>The main goal of sup is to provide a reusable model for working with health checks, as well as
a range of utilities for customizing them by e.g. adding timeouts or error recovery.
It also provides implementations for health checks of some popular integrations (JDBC, HTTP, etc.).</p>

<p>It’s a design decision not to include any sort of metrics, response times, version information or other statistics
in sup - they are simply beyond the scope of health checks.
Although some of these can be implemented by users and used with sup, they’re not officially supported.</p>

<p>Another design decision is that health is binary - a service is either healthy or not,
and there’s no “unknown” state.</p>
</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><p>sup is designed and developed by <a href="https://github.com/kubukoz/sup" target="_blank" rel="noopener noreferrer">Jakub Kozłowski</a></p></div><div class="row"><div><p>Website built with <a href="https://47degrees.github.io/sbt-microsites/" target="_blank" rel="noopener noreferrer">sbt-microsites</a> - © 2019 <a href="https://www.47deg.com/" target="_blank" rel="noopener noreferrer">47 Degrees</a></p></div></div></div></footer><script src="/highlight/highlight.pack.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/js/version-selector.js"></script></body></html>